(r-code-reuse)=
# رمز قابل لإعادة الاستخدام
يمكن لمشروع البرنامج الخاص بك أن يتراوح بين برنامج نصي صغير تستخدمه في معالجة البيانات ودفتر ملاحظات يستخدم لتحليل البيانات، أو مكتبة برمجيات تنفذ الخوارزميات الخاصة بك. بغض النظر عن حجم أو صغر مشروع البرنامج الخاص بك، من المهم جعل التعليمات البرمجية الخاصة بك قابلة لإعادة الاستخدام.

ولأنواع مختلفة من البرمجيات متطلبات مختلفة لكي تكون قابلة لإعادة الاستخدام: لنص نصي صغير، وقد يكون الحصول على الوثائق الكافية كافيا، في حين قد يكون من الضروري إجراء اختبار شامل بالنسبة لمكتبة البرمجيات الحيوية للبعثة. في المستوى الأساسي جدا، كل ما عليك فعله هو وضع التعليمات البرمجية الخاصة بك على الإنترنت في مكان ما من المحتمل أن يستمر لفترة طويلة. نهج أكثر تفصيلاً لجعل برمجيات بحثك أكثر قابلية لإعادة الاستخدام هو باتباع مبادئ برامج البحث (FAIR Principles for Research Software (FAIR4RS) {cite:ps}`ChueHong2021FAIR4RS`.

عندما نتحدث عن جعل التعليمات البرمجية قابلة لإعادة الاستخدام، من المفيد توضيح ما نعنيه. في جدول تعاريف {ref}`للقابلية للتكاثر<rr-overview-definitions-reproducibility>` قمنا بتعريف البحث القابل للتكاثر على أنه استخدام نفس البيانات والشفرة نفسها. ومع ذلك، عندما نتحدث عن إعادة استخدام التعليمات البرمجية يمكن أن يأخذ هذا عدة أشكال: قد نريد تشغيل نفس التعليمات البرمجية بالضبط (بلغات البرمجة المجمعة). وهذا قد يعني حتى نفس الملف الثنائي) بالضبط، أو قد نرغب في تعديل شفرة المصدر وتوسيع نطاقها بطريقة معينة لتتناسب مع احتياجاتنا. Freire and Chirigati {cite:ps}`Freire2018Reduciity` يوفر إطاراً لمستويات مختلفة من القابلية للتكرار، اعتماداً على ما يمكن تعديله. وهي تحدد المستويات التالية من القابلية للتكرار: قابلة للتكرار، ويمكن إعادة تشغيلها، ويمكن تحويلها، ويمكن تمديدها، ويمكن تعديلها.

وبوسعنا أن نضع تعريفات لإطار فريري على النحو التالي:

| Freire framework | تعاريف التكرارية                                                          |
| ---------------- | ------------------------------------------------------------------------- |
| التكرار          | قابل للنسخ (نفس البيانات، نفس التحليل)                                    |
| إعادة التشغيل    | قوي & قابل للتكرار (نفس التعليمة البرمجية، بيانات مختلفة/تحليل/بارامترات) |
| محمول            | *لم يتم النظر في* (نفس الكود/البيانات، بيئة مختلفة)                       |
| قابل للتوسع      | (جزئيا) عامّ                                                              |
| قابل للتعديل     | (جزئيا) عامّ                                                              |

ولم يسبق النظر في إمكانية النقل بل في بيئة مختلفة للبرمجيات (مثل مختلف المعدات). وقد يؤثر نظام التشغيل أو حتى تركيب جديد على معدات مماثلة) على قدرة البرنامج على العمل (على سبيل المثال، قد يؤثر على التبعيات).

كما أن إمكانية التعميم تلخص مفهومين: القدرة الموسعة (القدرة على الاندماج مع برمجيات أخرى) والقدرة على التعديل (القدرة على تغيير جزء من التنفيذ لتوسيع نطاق وظيفتها).

في بقية هذا الفصل نقدم قائمة بالتوصيات التي يمكنك اتباعها للتأكد من أن الكود الخاص بك قابل لإعادة الاستخدام.

(r-code-reuse-recommendation-checklist)=
## كيفية جعل التعليمات البرمجية الخاصة بك أكثر قابلية لإعادة الاستخدام
يحتوي هذا القسم على قائمة مرجعية بالتوصيات لجعل برنامجك أكثر قابلية لإعادة الاستخدام. يحتوي القسم الخاص بـ {ref}`rr-code-reuse-recommendation-detail` على شرح أكثر تعمقا لكل توصية من هذه التوصيات. يمكنك اتباع التوصيات الأكثر ملاءمة لنوع البرمجيات الخاص بك وتخطي تلك التي ليست ذات صلة في حالتك.

### التوصيات المتكررة
1. تأكد من أنك تستطيع العثور عليه (في الفضاء)
1. تأكد من أنك تستطيع العثور عليها (في الوقت)
1. تأكد من أنك تستطيع تنفيذ نفس سلسلة العمليات
1. تأكد من أن بيئتكم وتسلسل عملياتكم قويين ولا حاجة إلى أي إنسان لتكرار ما تم إنجازه
1. رخصة الرمز الخاص بك
    - مع ترخيص يسمح بإعادة الاستخدام؛
    - مع رخصة متوافقة مع رخص التبعيات
1. تأكد من أنه قابل للكابل
1. تضمين البيانات الضرورية
1. كتابة وثائق مفيدة*

### توصيات قابلة لإعادة التشغيل
1. إزالة البتات المشفرة وجعل الوحدة النمطية مرنة
1. اختبر أن الوحدات التي قمت بإنشائها يمكن أن تأخذ أنواعا مختلفة من بيانات الإدخال أو المعلمات
1. تحويل الوحدات إلى حزمة/صندوق أدوات
1. كتابة وثائق مفيدة*

### التوصيات المحمولة
1. تأكد من أنه يمكنك إعادة إنشاء البيئة حيث كانت تعيش
1. كتابة وثائق مفيدة*

### التوصيات الموسعة
1. كتابة وثائق مفيدة*

### التوصيات القابلة للتعديل
1. تأكد من أن الكود الخاص بك مقروء من قبل البشر
1. تأكد من وجود التعليقات
1. كتابة وثائق مفيدة*

قد يلاحظ القارئ المراقب أن `كتابة وثائق مفيدة` مذكورة لكل مستوى من إعادة الاستخدام. ويرجع ذلك إلى الحاجة إلى مستويات مختلفة من الوثائق لمختلف مستويات إعادة الاستخدام.

### الاحتياجات المختلفة من الوثائق لمختلف مستويات إعادة الاستخدام
وكتابة الوثائق المفيدة شرط هام بالنسبة لجميع مستويات إعادة الاستخدام. غير أنه بالنسبة لمختلف مستويات إعادة الاستخدام، هناك احتياجات مختلفة من الوثائق:

الوثائق
- يشرح الاستخدام، محدداً:
  - ما الذي تفعله البرامج؛ (مطلوب للتكرار)
  - كيف يمكن استخدامها؛ (مطلوب للتكرار)
  - ما هي الخيارات/المعلمات المتاحة. (مطلوب للتكرار )
- يحتوي على أمثلة لكيفية تشغيله. (مطلوب للتكرار )
- لديه تعليمات التثبيت، بما في ذلك الأوصاف الجيدة لما يلي:
  - المعدات التي تعتمد عليها (على سبيل المثال GPUs)؛ (مطلوبة للأجهزة المحمولة)
  - • نظام التشغيل الذي تم اختبار البرمجيات عليه؛ (مطلوب للأجهزة المحمولة)
  - الاحتياجات من البرمجيات (مثل المكتبات والضوابط). (مطلوب للهاتف المحمول)

(r-code-reuse-recommendation-detail)=
## توصيات رمز قابل لإعادة الاستخدام
تأكد من أنك (أو شخص آخر) تستطيع إعادة استخدام التعليمات البرمجية الخاصة بك للقيام بنفس الشيء الذي فعلته بالضبط. يحتوي قسم {ref}`rr-code-reuse-recommendation-checklist` على قائمة مرجعية بالتوصيات لجعل برنامجك أكثر قابلية لإعادة الاستخدام. ويتضمن هذا الفرع شرحا أكثر تعمقا لكل توصية من هذه التوصيات، مع مؤشرات للأجزاء الأخرى ذات الصلة من هذا الدليل.

### التوصيات المتكررة
في هذه المرحلة، قد لا تحتاج حتى إلى أن تكون قادراً على فتح التعليمات البرمجية وقراءتها، أنت فقط تريد التأكد من أنك تستطيع إعادة تشغيل جميع الخطوات المطلوبة والحصول على نفس النتائج التي لديك.

#### 1. تأكد من أنك تستطيع العثور عليه (في الفضاء)
يجب تخزين التعليمات البرمجية الخاصة بك علنا ومشاركتها مع المتعاونين. ولديها معرف ثابت فريد حتى يتمكن الجميع من العثور عليه والوصول إليه.

**انظر أيضًا**: {ref}`rr-vcs`

#### 2. تأكد من أنك تستطيع العثور عليها (في الوقت)
من الناحية المثالية يتم توثيق التطور الزمني للشفرة مع التحكم في الإصدار. هذا يسمح لك باسترداد نسخة محددة من الماضي.

**انظر أيضًا**: {ref}`rr-vcs`

#### 3. تأكد من أنك تستطيع تنفيذ نفس سلسلة العمليات
وغالبا ما يكون الإنسان الذي أنشأ البيئة هو أيضا الشخص الذي كتب الكود والشخص الذي يعرف بالضبط الترتيب اللازم للخطوات اللازمة للتمكن من إعادة تشغيل الكود واستنساخ النتائج. ومن المؤكد أن هذا يمكن توثيقه بعناية لكي يقوم به إنسان آخر مرة أخرى.

**انظر أيضًا**: [درس CodeRefinery في البحث القابل للتكرار](https://coderefinery.github.io/reproducible-research/)

#### 4. تأكد من أن بيئتكم وتسلسل عملياتكم قويين ولا حاجة إلى أي إنسان لتكرار ما تم إنجازه
لا تريد أن تعتمد على البشر. إنهم يميلون إلى ارتكاب أخطاء حتى وإن لم تكن لديهم نوايا سيئة. لذلك تريد أن تكون بيئتك سكريبت وأن يعاد إنشاؤها عند الحاجة، وتريد أن يتم تشغيل تسلسل العمليات الخاص بك بواسطة برنامج نصي لخط الأنابيب الذي يلغي معا كل تسلسل الخطوات.

**انظر أيضًا**: {ref}`rr-renv-options`

#### 5. رخصة الرمز الخاص بك
تأكد من إرفاق ترخيص بالكود الخاص بك وتحديد كيف تريد الاستشهاد به عندما يقوم الناس بإعادة استخدامه. فكر في استخدام رخصة مسموح بها تسمح بإعادة الاستخدام. كما يجب عليك اختيار ترخيص متوافق مع تراخيص المكتبات أو الحزم التي يعتمد عليها برنامجك.

**انظر أيضًا**: {ref}`rr-licensing-software`، {ref}`rr-licensing-software-permissive`، {ref}`rr-licensing-compatibility`

#### 6. تأكد من أنه قابل للكابل
تأكد من تحديد كيف تريد الاستشهاد بها عندما يقوم الناس بإعادة استخدامها.

**انظر أيضا**: {ref}`cm-citable-cite-software`

#### 7. تضمين البيانات الضرورية
إذا كان البرنامج يعتمد على أي نوع من البيانات، يجب أن تكون البيانات متاحة

**انظر أيضًا**: {ref}`rr-rdm-data`

### توصيات قابلة لإعادة التشغيل
تأكد من أنك (أو غيرها) تستطيع إعادة استخدامه للقيام بالشيء الذي فعلته، ولكن مع بيانات مختلفة/معلمات مختلفة

#### 1. إزالة البتات المشفرة وجعل الوحدة النمطية مرنة
لا تريد الحصول على تفاصيل محددة لبيانات أو معلمات التحليل الخاصة بك مشفرة في الكود. إذا كان شيء ما يمكن أن يصبح دالة قابلة لإعادة الاستخدام، فاصله عن المعلمات المشفرة وتحويله إلى شيء (إعادة استخدامه) بمفرده. اجعل الوحدات النقية: مع إعطاء نفس المدخلات، دالة نقية دائما ترجع نفس القيمة.

**راجع أيضًا**: [درس تطوير كود مصنع الكود الموحد](https://cicero.xyz/v3/remark/0.14.0/github.com/coderefinery/modular-code-development/master/talk.md/#1)

#### 2. اختبر أن الوحدات التي قمت بإنشائها يمكن أن تأخذ أنواعا مختلفة من بيانات الإدخال أو المعلمات
قد لا تعرف بعد كيف سيتم إعادة استخدام التعليمات البرمجية الخاصة بك في المستقبل، ولكن يمكنك منع كيفية عدم استخدامه إذا كنت تستطيع اختبار أي المعلمات مسموح بها.

**انظر أيضًا**: [درس مصفاة CodeRefinery في الاختبار الآلي](https://coderefinery.github.io/testing/motivation/)

#### 3. تحويل الوحدات إلى حزمة/صندوق أدوات
فصل المزيد من التفاصيل الخاصة بمشروعك مع الأجزاء التي يمكن إعادة استخدامها في مشاريعك الأخرى أو من قبل أشخاص آخرين.

**انظر أيضًا**: {ref}`rr-renv-pack`، [برنامج التغليف](https://scicomp.aalto.fi/scicomp/packaging-software/)، [تغليف البرمجيات في بايثون](https://aaltoscicomp.github.io/python-for-scicomp/packaging/)

### التوصيات المحمولة
وتشير إمكانية النقل إلى القدرة على نقل البرمجيات إلى بيئة جديدة. ويمكن أن يشير ذلك إلى آلة مطابقة (ولكن ليس ذاتها)، ولكن يمكن أن يشير أيضا إلى هندسة جديدة للمعدات، ونظام تشغيلي وما إلى ذلك. وكلاهما مهم لإعادة استخدام البرمجيات.

#### 1. تأكد من أنه يمكنك إعادة إنشاء البيئة حيث كانت تعيش
فالبيئة هي لقطة هشة في الوقت المناسب تصاحب المدونة بصمت. ويمكن أن يشمل الإنسان الذي قام بتشغيل البرمجيات، والخطوات التي قام بها الإنسان لإعداد البيانات، الأجهزة وأجهزة التشغيل والمكتبات والحزم الخارجية/صناديق الأدوات/التبعيات. وكل ذلك يمكن توثيقه بعناية لكي يعيد إنسان آخر القيام بنفس الخطوات بالضبط.

**انظر أيضًا**: {ref}`rr-renv`

### التوصيات الموسعة والقابلة للتعديل
تأكد من أن الآخرين يمكنهم البناء على التعليمات البرمجية الخاصة بك لتوسيع نطاقها وتحسينها.

#### 1. تأكد من أن الكود الخاص بك مقروء من قبل البشر
غالباً ما يدفع المزيد لكتابة التعليمات البرمجية للبشر الآخرين حتى يتمكنوا من قراءتها (بما في ذلك نفسك المستقبلي). لا يكون النيل المشفر الذي يحتوي على أسماء متغيرة غامضة أسرع أو أكثر كفاءة من تقسيم الخطوط الملاحية الواحدة إلى خطوات متعددة مع أسماء متغيرات مقروءة تكون منطقية. وعلاوة على ذلك، فإن استخدام اتفاقيات الترميز سيساعد القراء الآخرين.

**راجع أيضًا**: {ref}`rr-code-style-and-formatting`، {ref}`rrr-code-quality-advantage`

#### 1. تأكد من وجود التعليقات
كتابة التعليقات قبل كتابة الرمز الفعلي. تخيل أنه يمكن لشخص ما قراءة التعليقات وتخطي جميع أجزاء التعليمات البرمجية بين التعليقات والحصول على صورة كاملة لما يحدث كما لو أنهم قرأوا الكود بأكمله.
